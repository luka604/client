<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.Spinner?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.cell.PropertyValueFactory?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Separator?>

<VBox spacing="10" xmlns:fx="http://javafx.com/fxml"
      fx:controller="org.raflab.studsluzbadesktopclient.controllers.StudentProfilController">
    <padding>
        <Insets bottom="15.0" left="15.0" right="15.0" top="15.0"/>
    </padding>

    <Label text="Profil studenta" style="-fx-font-size: 18px; -fx-font-weight: bold;"/>

    <HBox spacing="10" alignment="CENTER_LEFT">
        <Label text="Broj indeksa:"/>
        <TextField fx:id="brojIndeksaTf" prefWidth="150" promptText="npr. 1/2023"/>
        <Button onAction="#handleUcitajStudenta" text="Ucitaj studenta"/>
        <Label fx:id="statusLabel" style="-fx-text-fill: green;"/>
    </HBox>

    <HBox spacing="10" alignment="CENTER_LEFT">
        <Label text="Izvestaji:" style="-fx-font-weight: bold;"/>
        <Button onAction="#handleGenerisiUverenjeOStudiranju" text="Uverenje o studiranju"
                style="-fx-background-color: #2196F3; -fx-text-fill: white;"/>
        <Button onAction="#handleGenerisiUverenjePolozeniIspiti" text="Uverenje o polozenim ispitima"
                style="-fx-background-color: #4CAF50; -fx-text-fill: white;"/>
    </HBox>

    <Separator/>

    <TabPane fx:id="tabPane" tabClosingPolicy="UNAVAILABLE">
        <!-- Tab 1: Licni podaci -->
        <Tab text="Licni podaci">
            <VBox spacing="10" style="-fx-padding: 10;">
                <GridPane hgap="10" vgap="10">
                    <Label text="Ime:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                    <Label fx:id="lblIme" GridPane.rowIndex="0" GridPane.columnIndex="1" style="-fx-font-weight: bold;"/>

                    <Label text="Prezime:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                    <Label fx:id="lblPrezime" GridPane.rowIndex="1" GridPane.columnIndex="1" style="-fx-font-weight: bold;"/>

                    <Label text="Srednje ime:" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                    <Label fx:id="lblSrednjeIme" GridPane.rowIndex="2" GridPane.columnIndex="1" style="-fx-font-weight: bold;"/>

                    <Label text="Pol:" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                    <Label fx:id="lblPol" GridPane.rowIndex="3" GridPane.columnIndex="1" style="-fx-font-weight: bold;"/>

                    <Label text="Email:" GridPane.rowIndex="4" GridPane.columnIndex="0"/>
                    <Label fx:id="lblEmail" GridPane.rowIndex="4" GridPane.columnIndex="1" style="-fx-font-weight: bold;"/>

                    <Label text="Telefon:" GridPane.rowIndex="5" GridPane.columnIndex="0"/>
                    <Label fx:id="lblTelefon" GridPane.rowIndex="5" GridPane.columnIndex="1" style="-fx-font-weight: bold;"/>

                    <Label text="Uspeh srednja skola:" GridPane.rowIndex="6" GridPane.columnIndex="0"/>
                    <Label fx:id="lblUspehSrednjaSkola" GridPane.rowIndex="6" GridPane.columnIndex="1" style="-fx-font-weight: bold;"/>

                    <Label text="Uspeh prijemni:" GridPane.rowIndex="7" GridPane.columnIndex="0"/>
                    <Label fx:id="lblUspehPrijemni" GridPane.rowIndex="7" GridPane.columnIndex="1" style="-fx-font-weight: bold;"/>

                    <Separator GridPane.rowIndex="8" GridPane.columnIndex="0" GridPane.columnSpan="2"/>

                    <Label text="Ukupno ESPB:" GridPane.rowIndex="9" GridPane.columnIndex="0" style="-fx-font-weight: bold;"/>
                    <Label fx:id="lblUkupnoEspbProfil" GridPane.rowIndex="9" GridPane.columnIndex="1" style="-fx-font-weight: bold; -fx-text-fill: #2196F3; -fx-font-size: 14px;"/>

                    <Label text="Prosecna ocena:" GridPane.rowIndex="10" GridPane.columnIndex="0" style="-fx-font-weight: bold;"/>
                    <Label fx:id="lblProsecnaOcena" GridPane.rowIndex="10" GridPane.columnIndex="1" style="-fx-font-weight: bold; -fx-text-fill: #4CAF50; -fx-font-size: 14px;"/>
                </GridPane>
            </VBox>
        </Tab>

        <!-- Tab 2: Polozeni ispiti -->
        <Tab text="Polozeni ispiti">
            <VBox spacing="10" style="-fx-padding: 10;">
                <TableView fx:id="tabelaPolozeni" prefHeight="300">
                    <columns>
                        <TableColumn prefWidth="200" text="Predmet">
                            <cellValueFactory><PropertyValueFactory property="predmet"/></cellValueFactory>
                        </TableColumn>
                        <TableColumn prefWidth="80" text="Ocena">
                            <cellValueFactory><PropertyValueFactory property="ocena"/></cellValueFactory>
                        </TableColumn>
                        <TableColumn prefWidth="120" text="Datum polaganja">
                            <cellValueFactory><PropertyValueFactory property="datumPolaganja"/></cellValueFactory>
                        </TableColumn>
                        <TableColumn prefWidth="80" text="Priznat">
                            <cellValueFactory><PropertyValueFactory property="priznat"/></cellValueFactory>
                        </TableColumn>
                    </columns>
                </TableView>
                <HBox spacing="10" alignment="CENTER">
                    <Button onAction="#handlePreviousPolozeni" text="Prethodna"/>
                    <Label fx:id="lblPagePolozeni" text="Stranica 1"/>
                    <Button onAction="#handleNextPolozeni" text="Sledeca"/>
                </HBox>
            </VBox>
        </Tab>

        <!-- Tab 3: Nepolozeni ispiti -->
        <Tab text="Nepolozeni ispiti">
            <VBox spacing="10" style="-fx-padding: 10;">
                <TableView fx:id="tabelaNepolozeni" prefHeight="300">
                    <columns>
                        <TableColumn prefWidth="100" text="Sifra">
                            <cellValueFactory><PropertyValueFactory property="sifra"/></cellValueFactory>
                        </TableColumn>
                        <TableColumn prefWidth="200" text="Naziv">
                            <cellValueFactory><PropertyValueFactory property="naziv"/></cellValueFactory>
                        </TableColumn>
                        <TableColumn prefWidth="60" text="ESPB">
                            <cellValueFactory><PropertyValueFactory property="espb"/></cellValueFactory>
                        </TableColumn>
                        <TableColumn prefWidth="80" text="Semestar">
                            <cellValueFactory><PropertyValueFactory property="semestar"/></cellValueFactory>
                        </TableColumn>
                    </columns>
                </TableView>
                <HBox spacing="10" alignment="CENTER">
                    <Button onAction="#handlePreviousNepolozeni" text="Prethodna"/>
                    <Label fx:id="lblPageNepolozeni" text="Stranica 1"/>
                    <Button onAction="#handleNextNepolozeni" text="Sledeca"/>
                </HBox>
            </VBox>
        </Tab>

        <!-- Tab 4: Upisane godine -->
        <Tab text="Upisane godine">
            <VBox spacing="10" style="-fx-padding: 10;">
                <ListView fx:id="listaUpisaneGodine" prefHeight="150"/>

                <Separator/>

                <Label text="Upis na novu godinu:" style="-fx-font-weight: bold;"/>
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="Godina:"/>
                    <Spinner fx:id="spinnerGodina" prefWidth="80"/>
                    <Label text="Napomena:"/>
                    <TextField fx:id="upisNapomenaTf" prefWidth="200"/>
                </HBox>

                <HBox spacing="20">
                    <VBox spacing="5" HBox.hgrow="ALWAYS">
                        <Label text="Novi predmeti za godinu (izaberi):"/>
                        <ListView fx:id="listaNoviPredmeti" prefHeight="120"/>
                    </VBox>
                    <VBox spacing="5" HBox.hgrow="ALWAYS">
                        <Label text="Predmeti koje prenosi (nepolozeni):"/>
                        <ListView fx:id="listaPredmetiZaUpis" prefHeight="120"/>
                    </VBox>
                </HBox>

                <Button onAction="#handleUpisGodine" text="Upisi godinu" style="-fx-background-color: #4CAF50; -fx-text-fill: white;"/>
            </VBox>
        </Tab>

        <!-- Tab 5: Obnovljene godine -->
        <Tab text="Obnovljene godine">
            <VBox spacing="10" style="-fx-padding: 10;">
                <ListView fx:id="listaObnovljeneGodine" prefHeight="200"/>

                <Separator/>

                <Label text="Obnova godine:" style="-fx-font-weight: bold;"/>
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="Godina za obnovu:"/>
                    <Spinner fx:id="spinnerObnovaGodina" prefWidth="80"/>
                    <Label text="Napomena:"/>
                    <TextField fx:id="obnovaNapomenaTf" prefWidth="200"/>
                </HBox>
                <Label text="Izaberi predmete (maks 60 ESPB):"/>
                <ListView fx:id="listaPredmetiZaObnovu" prefHeight="100"/>
                <HBox spacing="10">
                    <Label text="Ukupno ESPB:"/>
                    <Label fx:id="lblUkupnoEspb" text="0"/>
                </HBox>
                <Button onAction="#handleObnovaGodine" text="Obnovi godinu"/>
            </VBox>
        </Tab>

        <!-- Tab 6: Uplate -->
        <Tab text="Uplate">
            <VBox spacing="10" style="-fx-padding: 10;">
                <GridPane hgap="10" vgap="10">
                    <Label text="Preostalo za uplatu (EUR):" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                    <Label fx:id="lblPreostaloEUR" GridPane.rowIndex="0" GridPane.columnIndex="1" style="-fx-font-weight: bold; -fx-text-fill: red;"/>

                    <Label text="Preostalo za uplatu (RSD):" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                    <Label fx:id="lblPreostaloRSD" GridPane.rowIndex="1" GridPane.columnIndex="1" style="-fx-font-weight: bold; -fx-text-fill: red;"/>

                    <Label text="Ukupno uplaceno (EUR):" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                    <Label fx:id="lblUkupnoUplaceno" GridPane.rowIndex="2" GridPane.columnIndex="1" style="-fx-font-weight: bold; -fx-text-fill: green;"/>

                    <Label text="Srednji kurs EUR:" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                    <Label fx:id="lblSrednjiKurs" GridPane.rowIndex="3" GridPane.columnIndex="1" style="-fx-font-weight: bold;"/>
                </GridPane>

                <Separator/>

                <Label text="Dodaj novu uplatu:" style="-fx-font-weight: bold;"/>
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="Iznos (RSD):"/>
                    <TextField fx:id="iznosUplateTf" prefWidth="150"/>
                    <Button onAction="#handleDodajUplatu" text="Dodaj uplatu" style="-fx-background-color: #4CAF50; -fx-text-fill: white;"/>
                </HBox>
            </VBox>
        </Tab>
    </TabPane>
</VBox>
